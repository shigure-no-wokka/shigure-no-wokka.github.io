---
title: UE ARPG 系统 Part2 UI 管理系统
pubDate: 2024-09-08 01:15
description: ARPG 系统中的 UI 管理系统开发记录
image: https://raw.githubusercontent.com/shigure-no-wokka/pic_bed/main/imgs/family_engine.jpg
categories:
    - Engine
tags:
    - UnrealEngine
    - ARPG
    - UISystem
---


<!--more-->

## 项目概述

- 本项目旨在开发一套游戏内的 UI 管理框架，用以简化 UI 结构并高效管理 UI 界面
- 主要分为两个部分：**C++ 层构建框架** + **Lua 层处理业务逻辑**
- **C++ 层构建框架**分为四个模块：
  - 层级管理器
  - 生命周期管理器
  - 导航管理器
  - 事件管理器
- **Lua 层处理业务逻辑**：主要涉及具体界面内部的逻辑以及 Debug 工具（包装一些 GM 指令等），方便快速开发和迭代

## 模块设计

- **层级管理器**：UIStackManager
  - 管理不同层级 UI、保证 UI 之间的正确跳转（提供自动识别角色是否处于战斗状态，来切换不同 UI）
  - 层级分类：
    - 背景层：一般不直接与用户产生交互
    - 主界面层：与用户的主要交互区
    - 弹出窗口：一般为需要暂停游戏的部分
    - 提示信息：通常为显示一段时间就自行消失的提示
- **生命周期管理器**：UILifeManager
  - 管理 UI 的加载和卸载，确保不需要的 UI 不会占用内存等资源
  - 保证缓存机制，常用的 UI 不需要频繁创建和销毁
  - 增加资源的加载与卸载功能、支持异步加载资源
  - UI 的生命周期可以分为：
    - 创建
    - 初始化
    - 显示
    - 隐藏
    - 销毁 
- **导航管理器**：UINavManager
  - 支持键盘、手柄和鼠标的 UI 导航
  - 通常为：自动切换 UI 界面可操作焦点，比如方向键控制用户的 UI 焦点
- **事件管理器**：UIEventManager
  - 统一处理 UI 事件和外部输入，包括 UI 内部通信、用户按键、游戏内其他模块消息等
  - 支持自使用定义事件和事件监听与绑定
  - 支持数据驱动的 UI 更新机制
  - 提供事件的冒泡机制，比如子控件的事件可以传向父控件
  - 支持接收 RPC 事件，保证多人游戏的同步
<!-- - **动画效果管理器**：UIAnimManager
- 本地化与多语言支持 -->


## 估期预计





